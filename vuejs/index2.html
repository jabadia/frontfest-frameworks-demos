<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Demo</title>
	<style>
		html {
			font-family: 'Arial';
			font-size: 20px;
		}
		button {
			font-size: 18px;
			border-radius: 8px;
			min-height: 30px;
			margin: 5px 0;
			background: #eee;
		}
		.root {
			margin: 20px;
			padding: 20px;
			border: 2px solid green;
			color: green;
			border-radius: 8px;
		}
		.my-component {
			display: block;
			margin-top: 20px;
			padding: 20px;
			border: 2px solid blue;
			color: blue;
			border-radius: 8px;
		}
	</style>
</head>
<body>
	<div id="app">
		<div class="root">
			Hello {{greeting}}!<br>
			counter: {{counter}}<br>
			doubleCounter: {{doubleCounter}}<br>
			tripleCounter: {{tripleCounter}}<br>
			unrelated: {{unrelated}}<br>
			<button @click="increment()">increment</button><br>
			<button @click="incrementUnrelated()">increment unrelated</button>
			<my-component :my-counter='counter' @update:my-counter='value => counter=value'></my-component>
		</div>
	</div>

	<script src="./vue.js"></script>
	<script>

		Vue.component('MyComponent', {
			props: ['myCounter'],
			template: `
			<div class="my-component">
				<div>myComponent</div>
				<b>{{myCounter}}</b><br>
				<button @click="myIncrement()">my increment</button>
			</div>
			`,
			methods: {
				myIncrement() {
					this.$emit('update:my-counter', this.myCounter + 5);
				},
			},
		});

		var vm = new Vue({
			el: '#app',
			data: () => {
				return {
					greeting: 'World',
					counter: 0,
					unrelated: 0,
				};
			},
			computed: {
				doubleCounter() {
					console.log("updating doubleCounter from counter", this.counter);
					return this.counter * 2;
				},
				tripleCounter() {
					console.log("updating tripleCounter from doubleCounter", this.doubleCounter);
					return this.doubleCounter * 3;
				}
			},
			methods: {
				increment() {
					this.counter += 1;
				},
				incrementUnrelated() {
					this.unrelated += 100;
				}
			}
		});
		
	</script>
</body>
</html>